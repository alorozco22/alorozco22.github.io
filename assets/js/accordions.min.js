"use strict";function ebAccordionInit(){return-1===navigator.userAgent.indexOf("Opera Mini")&&"querySelectorAll"in document&&"addEventListener"in window&&!!Array.prototype.forEach}function ebAccordionFirstSectionID(){var e=document.querySelector('[data-accordion-role="first-section"]').getAttribute("id");return e}function ebAccordionSetUpSections(e){if(document.querySelector(".subheadline")||document.querySelector("h2")){document.querySelector(".subheadline")?(document.querySelector(".subheadline").setAttribute("data-accordion-role","first-section"),document.querySelector(".subheadline").id="subheadline"):document.querySelector("h2").setAttribute("data-accordion-role","first-section"),ebAccordionFirstSectionID();var t=document.querySelector("#content");t.setAttribute("role","tablist"),e.forEach(function(e){var r=document.createElement("section");r.setAttribute("role","tabpanel"),r.setAttribute("aria-labelledby",e.id),r.setAttribute("data-accordion-container",e.id),t.insertBefore(r,e);var o=document.createElement("header");o.appendChild(e);var n=document.createElement("a");n.href="#"+e.id,n.innerHTML=e.innerHTML,e.innerHTML=n.outerHTML,e.setAttribute("role","tab"),r.appendChild(o);var c=document.createElement("div");c.setAttribute("data-container",!0),r.appendChild(c)})}}function ebAccordionFillSections(){var e=document.querySelectorAll("#content > *"),t=!1;e.forEach(function(e){if("tabpanel"===e.getAttribute("role"))return void(t=e);t&&t.querySelector("[data-container]").appendChild(e)})}function ebMoveThemeKeys(){var e=document.querySelectorAll(".theme-key");document.querySelectorAll(".theme-key a").forEach(function(e){e.parentNode.parentNode.parentNode.nextElementSibling.firstChild.firstChild.appendChild(e)}),e.forEach(function(e){e.parentNode.removeChild(e)})}function ebAccordionHideAll(){document.querySelectorAll('[role="tabpanel"]').forEach(function(e){e.querySelector('[role="tab"]').setAttribute("data-accordion","closed"),e.querySelector("[data-container]").setAttribute("aria-expanded","false")})}function ebAccordionHideAllExceptThisOne(e){document.querySelectorAll('[role="tabpanel"]').forEach(function(t){t.getAttribute("aria-labelledby")!==e&&(t.querySelector('[role="tab"]').setAttribute("data-accordion","closed"),t.querySelector("[data-container]").setAttribute("aria-expanded","false"))})}function ebAccordionCheckParent(e){if(!e)return!1;if(!e.parentNode)return!1;if("BODY"==e.tagName)return!1;var t=e.parentNode;return t.getAttribute("data-accordion-container")?t.getAttribute("data-accordion-container"):ebAccordionCheckParent(t)}function ebAccordionFindSection(e){return ebAccordionCheckParent(e)}function ebWhichTarget(e){var t;if(e){var e=decodeURIComponent(e);t=document.getElementById(e)}else{var r=window.location.hash.replace("#",""),r=decodeURIComponent(r);t=document.getElementById(r)}return t||!1}function ebAccordionShow(e){var t=ebWhichTarget(e);if(t){var r=ebAccordionFindSection(t);if(r){var o='[aria-labelledby="'+r+'"]',n=document.querySelector(o);n.querySelector('[role="tab"]').setAttribute("data-accordion","open");n.querySelector("[data-container]").setAttribute("aria-expanded","true");var c=n.querySelectorAll("[data-srcset]");ebLazyLoadImages(c);n.querySelectorAll(".slides").forEach(function(e){var t=e.querySelector(".figure img");t&&t.addEventListener("load",function(){t.height>t.width&&e.querySelector("nav").classList.add("nav-slides-portrait")})}),"function"==typeof videoShow&&videoShow(n)}}}function ebAccordionListenForAnchorClicks(){document.querySelectorAll("#content a").forEach(function(e){"_blank"!==e.target&&e.addEventListener("click",function(e){if(e.stopPropagation(),"noopener"!==this.getAttribute("rel")&&this.hasAttribute("href")){var t=this.getAttribute("href").replace(/.*#/,"");if("open"===this.parentNode.getAttribute("data-accordion"))return void ebAccordionHideAll();this.parentNode.getAttribute("data-accordion")||(t=ebAccordionFindSection(document.getElementById(t))),ebAccordionShow(t),ebAccordionHideAllExceptThisOne(t)}})})}function ebAccordionListenForHeadingClicks(){document.querySelectorAll("[data-accordion]").forEach(function(e){e.addEventListener("click",function(){this.querySelector("a").click()})})}function ebAccordionListenForNavClicks(){document.querySelectorAll("#nav [href]").forEach(function(e){e.addEventListener("click",function(){var e=document.getElementById(this.hash.replace(/.*#/,""));e&&"closed"===e.getAttribute("data-accordion")&&e.querySelector("a").click()})})}function ebAccordionListenForHashChange(){window.addEventListener("hashchange",function(){var e=window.location.hash,e=decodeURIComponent(e),t=document.getElementById(e.replace(/.*#/,"")),r=t.getBoundingClientRect(),o=r.top>=-r.height&&r.left>=-r.width&&r.bottom<=r.height+window.innerHeight&&r.right<=r.width+window.innerWidth,n=t.getAttribute("data-accordion");if(!o||n){if("closed"===n)return void t.querySelector("a").click();targetAccordionID=ebAccordionFindSection(t),ebAccordionShow(targetAccordionID),ebAccordionHideAllExceptThisOne(targetAccordionID)}})}function ebAccordify(){if(ebAccordionInit()){var e=document.querySelectorAll('#content h2, #content .subheadline, [data-accordion-role="first-section"]');if(e){var t=-1===document.querySelector("body").getAttribute("class").indexOf("chapter"),r=null===document.querySelector('#content h2, #content .subheadline, [data-accordion-role="first-section"]'),o=-1!==document.querySelector("body").getAttribute("class").indexOf("endmatter");if(!(t||r||o)){if(ebAccordionSetUpSections(e),ebAccordionFillSections(),ebMoveThemeKeys(),searchTerm){document.querySelectorAll("section[data-accordion-container]").forEach(function(e){var t=e.querySelectorAll("[data-markjs]"),r=t.length;if(r){var o=e.querySelector("header a");o.innerHTML="<mark>"+o.innerHTML+"</mark>";var n=document.createElement("p");n.innerHTML=1==r?r+" "+locales[pageLanguage].search["results-for-singular"]+' "<mark>'+searchTerm+'</mark>"':r+" "+locales[pageLanguage].search["results-for-plural"]+' "<mark>'+searchTerm+'</mark>"',e.querySelector("header").appendChild(n)}});var n=document.querySelectorAll("[data-markjs]"),c=n.length;if(c){var i=document.createElement("p");i.classList.add("search-results-summary"),i.innerHTML=1==c?c+" "+locales[pageLanguage].search["results-for-singular"]+' "<mark>'+searchTerm+'</mark>".':c+" "+locales[pageLanguage].search["results-for-plural"]+' "<mark>'+searchTerm+'</mark>".';var a=document.querySelector("h1");document.querySelector("#content").insertBefore(i,a.nextSibling),n[0].id="first-search-result",i.innerHTML+=' <a href="#first-search-result">'+locales[pageLanguage].search["jump-to-first"]+"</a>."}}if(!window.location.hash)return ebAccordionHideAllExceptThisOne(ebAccordionFirstSectionID()),void ebAccordionShow(ebAccordionFirstSectionID());ebAccordionHideAll(),ebAccordionShow()}}}}ebAccordify(),ebAccordionListenForAnchorClicks(),ebAccordionListenForHeadingClicks(),ebAccordionListenForNavClicks(),ebAccordionListenForHashChange();