
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>
    Experiments in economics: Laboratory projects: External media
    </title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="External media" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://www.core-econ.org/docs/external-media.html" />
    <meta property="og:image" content="http://www.core-econ.org/_docs/images/web/" />
        <link rel="stylesheet" type="text/css" media="all" href="/book/styles/web.css" />
<script id="MathJax"
   src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script id="MathJaxConfig" type="text/x-mathjax-config" >
MathJax.Hub.Config({
    messageStyle: "none",
    "HTML-CSS": {
        availableFonts: [], // force use of webFont
        webFont: "Gyre-Pagella",
        scale: 90,
        styles: {
            ".MathJax [style*=border-top-width]": {
                "border-top-width": "0.5pt ! important"
            }
        }
    }
});
</script>
<script>
WebFontConfig = {
     google: {
         families: ['Amiri:400,400i,700', 'Source Sans Pro:400,700,700:latin-ext']
     }
};
(function(d) {
    var wf = d.createElement('script'), s = d.scripts[0];
    wf.src = 'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js';
    wf.async = true;
    s.parentNode.insertBefore(wf, s);
})(document)
</script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-71347024-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-106812057-1');
</script>
</head>
<body class="_docs chapter">
<div class="notification warning-testing-site">
    You're looking at a testing site for Experiments in economics: Laboratory projects, not the real, live site.
</div>
<div id="wrapper">
<div class="masthead">
    <ul>
        <li class="masthead-series-name"><a href="../index.html">Experiments in economics: Laboratory projects</a></li>
    </ul>
</div><!--.masthead-->
<div class="nav-buttons">
	<a class="nav-back-button">←</a>
	<a class="nav-button" href="#nav">Contents</a>
</div>
    <div class="chapter-opener-image chapter-opener-image-none">
    </div>
	<div id="content">
<h1 class="no_toc" id="external-media">External media</h1>
<ul id="markdown-toc">
  <li><a href="#setting-external-media-paths" id="markdown-toc-setting-external-media-paths">Setting external-media paths</a></li>
  <li><a href="#structuring-external-media-files" id="markdown-toc-structuring-external-media-files">Structuring external-media files</a></li>
  <li><a href="#epub-and-app-output" id="markdown-toc-epub-and-app-output">Epub and app output</a></li>
  <li><a href="#translations" id="markdown-toc-translations">Translations</a></li>
  <li><a href="#local-media" id="markdown-toc-local-media">Local media</a>    <ul>
      <li><a href="#setting-a-filesystem-path" id="markdown-toc-setting-a-filesystem-path">Setting a filesystem path</a></li>
      <li><a href="#setting-a-local-url" id="markdown-toc-setting-a-local-url">Setting a local URL</a></li>
    </ul>
  </li>
</ul>
<p>When a large number of images makes a project repository too big, you can store your images in a separate repo and serve them on a separate server for PDF and web output. We call this ‘external media’.</p>
<h2 id="setting-external-media-paths">Setting external-media paths</h2>
<p>You set the full URL for the <code class="language-r highlighter-rouge"><span class="n">remote</span><span class="o">-</span><span class="n">media</span></code> location in <code class="language-r highlighter-rouge"><span class="err">_</span><span class="n">data</span><span class="o">/</span><span class="n">settings.yml</span></code>. The <code class="language-r highlighter-rouge"><span class="n">remote</span><span class="o">-</span><span class="n">media</span></code> paths must be full URLs. For example:</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">remote</span><span class="o">-</span><span class="n">media</span><span class="o">:</span><span class="w">
  </span><span class="n">live</span><span class="o">:</span><span class="w"> </span><span class="s2">"http://media.superpotatoes.com"</span><span class="w">
  </span><span class="n">development</span><span class="o">:</span><span class="w"> </span><span class="s2">"http://dev.superpotatoes.com/media"</span><span class="w">
</span></code></pre></div></div>
<p>To disable external media, just comment out the relevant settings or leave the values blank:</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">remote</span><span class="o">-</span><span class="n">media</span><span class="o">:</span><span class="w">
  </span><span class="n">live</span><span class="o">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="n">development</span><span class="o">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span></code></pre></div></div>
<h2 id="structuring-external-media-files">Structuring external-media files</h2>
<p>At the remote-media domain, the paths to media should match the paths to that media in this project.</p>
<p>For example, if a project called <code class="language-r highlighter-rouge"><span class="n">superpotatoes</span></code> contains two books, <code class="language-r highlighter-rouge"><span class="n">mondial</span></code> and <code class="language-r highlighter-rouge"><span class="n">fabula</span></code>, the remote-media URL might be <code class="language-r highlighter-rouge"><span class="n">http</span><span class="o">://</span><span class="n">media.superpotatoes.com</span></code>. And on that media server, web images would be stored in <code class="language-r highlighter-rouge"><span class="n">http</span><span class="o">://</span><span class="n">media.superpotatoes.com</span><span class="o">/</span><span class="n">mondial</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">web</span></code> and <code class="language-r highlighter-rouge"><span class="n">http</span><span class="o">://</span><span class="n">media.superpotatoes.com</span><span class="o">/</span><span class="n">fabula</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">web</span></code>.</p>
<p>Images inserted by CSS (e.g. <code class="language-r highlighter-rouge"><span class="n">background</span><span class="o">-</span><span class="n">image</span></code> files) cannot be in external media, because their paths are fixed in CSS. So do not move these to the external media location.</p>
<h2 id="epub-and-app-output">Epub and app output</h2>
<p>External media does not work for app or epub output. For apps with enough images to warrant external media, it’s recommended that you use a separate Cordova-based repo for your app, into the <code class="language-r highlighter-rouge"><span class="n">www</span></code> folder of which which you simply copy-paste your app-ready HTML.</p>
<h2 id="translations">Translations</h2>
<p>When using remote-media, translations must have their own image files in their translation subdirectories (e.g. <code class="language-r highlighter-rouge"><span class="n">http</span><span class="o">://</span><span class="n">superpotatoes.com</span><span class="o">/</span><span class="n">mondial</span><span class="o">/</span><span class="n">fr</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">web</span></code>). That is, unlike local images they cannot inherit their parent language’s images in the absence of their own <code class="language-r highlighter-rouge"><span class="n">images</span></code> folder.</p>
<h2 id="local-media">Local media</h2>
<p>Remote media works well for web output, but it means you have to be online, and can make PDF output very slow, because Prince has to fetch every image over the Internet. For faster PDF output you can tell the system to use images on your local machine instead by setting a <code class="language-r highlighter-rouge"><span class="n">local</span><span class="o">-</span><span class="n">media</span></code> path, in addition to <code class="language-r highlighter-rouge"><span class="n">remote</span><span class="o">-</span><span class="n">media</span></code>.</p>
<p>When a <code class="language-r highlighter-rouge"><span class="n">local</span><span class="o">-</span><span class="n">media</span></code> path is set, PDF outputs will use that path to images, so that Prince does not have to fetch every image over the Internet.</p>
<p>The local-media path can be set in two ways:</p>
<ol>
  <li>As a path on your computer’s filesystem, relative to the <code class="language-r highlighter-rouge"><span class="err">_</span><span class="n">site</span></code> folder.</li>
  <li>As a URL served locally, by a webserver running on your machine.</li>
</ol>
<h3 id="setting-a-filesystem-path">Setting a filesystem path</h3>
<p>A relative filesystem path might look like this:</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">local</span><span class="o">-</span><span class="n">media</span><span class="o">:</span><span class="w">
  </span><span class="n">live</span><span class="o">:</span><span class="w"> </span><span class="s2">"../../superpotatoes-media"</span><span class="w">
  </span><span class="n">development</span><span class="o">:</span><span class="w"> </span><span class="s2">"../../superpotatoes-media"</span><span class="w">
</span></code></pre></div></div>
<p>(Currently, the <code class="language-r highlighter-rouge"><span class="n">live</span></code> local-media path is not used; but this might change in future. For example, the Electric Book Manager may use the <code class="language-r highlighter-rouge"><span class="n">live</span></code> setting in future. So we recommend setting both for now.)</p>
<p class="box">Note: The <code class="language-r highlighter-rouge"><span class="n">development</span></code> build is the default build type. A <code class="language-r highlighter-rouge"><span class="n">live</span></code> build only really applies to web builds. We set <code class="language-r highlighter-rouge"><span class="n">build</span><span class="o">:</span><span class="w"> </span><span class="n">live</span></code> in <code class="language-r highlighter-rouge"><span class="err">_</span><span class="n">config.live.yml</span></code>, which is generally only used for building live website packages.</p>
<p>We recommend that you store your local copy of the external-media directory alongside the main project repo directory, to make the filesystem path to the local images simple.</p>
<p>To use external media from a directory alongside the main project repo, then, you would write the path to go up two levels (<code class="language-r highlighter-rouge"><span class="n">..</span><span class="o">/</span><span class="n">..</span><span class="o">/</span></code>) and into the external media directory, as shown above.</p>
<h3 id="setting-a-local-url">Setting a local URL</h3>
<p>Web output cannot use a relative filesystem path, because a webserver cannot see outside of its own root directory on your filesystem.</p>
<p>So you can use a webserver running on your own machine for offline development, e.g.</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">local</span><span class="o">-</span><span class="n">media</span><span class="o">:</span><span class="w">
  </span><span class="n">development</span><span class="o">:</span><span class="w"> </span><span class="s2">"http://localhost:5000"</span><span class="w">
</span></code></pre></div></div>
<p>If you use the <code class="language-r highlighter-rouge"><span class="n">electric</span><span class="o">-</span><span class="n">book</span><span class="o">-</span><span class="n">media</span></code> template for your external media repo, the OS-specific <code class="language-r highlighter-rouge"><span class="n">run</span><span class="o">-</span></code> scripts there will launch a local server running at that address. You can run it at the same time as your local Jekyll instance of your book project.</p>
	</div><!--#content-->
    <div id="nav" class="non-printing">
            <h2>Documentation</h2>
            <div class="nav-list">
                    <ol class="nav-series-home">
                        <li><a href="../index.html">Home</a></li>
                    </ol>
                    <ul>
                        <li><a href="../docs">Docs</a>
<ul>
    <li class="has-children"><a>Editing</a>
      <ul>
          <li>
            <a href="/docs/bibliography.html">Bibliography</a>
          </li>
          <li>
            <a href="/docs/boxes-and-box-like-features.html">Boxes</a>
          </li>
          <li>
            <a href="/docs/classes.html">Supported classes</a>
          </li>
          <li>
            <a href="/docs/definitions.html">Definitions</a>
          </li>
          <li>
            <a href="/docs/dialogue.html">Dialogue</a>
          </li>
          <li>
            <a href="/docs/figures.html">Figures</a>
          </li>
          <li>
            <a href="/docs/glossary.html">Glossary</a>
          </li>
          <li>
            <a href="/docs/house-style.html">House style</a>
          </li>
          <li>
            <a href="/docs/images.html">Images</a>
          </li>
          <li>
            <a href="/docs/include-theme-legend.html">Theme legends</a>
          </li>
          <li>
            <a href="/docs/markdown.html">Markdown</a>
          </li>
          <li>
            <a href="/docs/mathematics.html">Mathematics</a>
          </li>
          <li>
            <a href="/docs/multiple-choice-questions.html">Questions</a>
          </li>
          <li>
            <a href="/docs/notes.html">Footnotes, endnotes and sidenotes</a>
          </li>
          <li>
            <a href="/docs/showing-links-and-cross-references-in-print.html">Links and cross-refs</a>
          </li>
          <li>
            <a href="/docs/slides.html">Slidelines</a>
          </li>
          <li>
            <a href="/docs/superscripts-and-subscripts.html">Superscripts and subscripts</a>
          </li>
          <li>
            <a href="/docs/tables.html">Tables</a>
          </li>
          <li>
            <a href="/docs/theme-key.html">Theme keys</a>
          </li>
          <li>
            <a href="/docs/tocs.html">Tables of contents</a>
          </li>
          <li>
            <a href="/docs/translations.html">Translations</a>
          </li>
          <li>
            <a href="/docs/videos.html">Videos</a>
          </li>
          <li>
            <a href="/docs/web-navigation.html">Navigation</a>
          </li>
      </ul>
    </li>
    <li class="has-children"><a>Technical</a>
      <ul>
          <li>
            <a href="/docs/converting-manuscript-to-markdown.html">Converting manuscript to markdown</a>
          </li>
          <li>
            <a href="/docs/external-media.html">External media</a>
          </li>
          <li>
            <a href="/docs/javascript.html">Javascript</a>
          </li>
          <li>
            <a href="/docs/requirements.html">Technical requirements</a>
          </li>
          <li>
            <a href="/docs/setting-up-your-computer.html">Setting up your computer</a>
          </li>
          <li>
            <a href="/docs/setting-up.html">Setting up</a>
          </li>
      </ul>
    </li>
    <li class="has-children"><a>Layout</a>
      <ul>
          <li>
            <a href="/docs/page-numbers.html">Page numbers</a>
          </li>
          <li>
            <a href="/docs/print-layout.html">Print layout</a>
          </li>
          <li>
            <a href="/docs/running-heads-in-print.html">Running heads</a>
          </li>
      </ul>
    </li>
    <li class="has-children"><a>Output</a>
      <ul>
          <li>
            <a href="/docs/print-output.html">Print output</a>
          </li>
      </ul>
    </li>
</ul>
                        </li>
                    </ul>
  <ol class="">
  </ol>
            </div><!--.nav-list-->
            <div class="widgets">
            </div><!--.widgets-->
    </div><!--#nav-->
    <div id="footer" dir="ltr">
        <div class="footer-content">
            <div class="footer-logos">
                <a href="http://core-econ.org">
                    <img src="../assets/coreecon_logo_bw.png">
                </a>
            </div>
            <div class="footer-text">
            </div>
            <div class="footer-licence">
                <a title="Licensed under Creative Commons BY NC ND" alt="Licensed under Creative Commons BY NC ND" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img src="../assets/cc-byncnd.png"></a>
                <br />
            </div>
        </div><!--.footer-content-->
    </div><!--#footer-->
    <script src="../assets/js/bundle.js"></script>
    <style>
        .js-mcq .mcq-correct .mcq-feedback:before {
            content: "Correct!";
        }
        .js-mcq .mcq-incorrect .mcq-feedback:before {
            content: "Incorrect";
        }
        .js-mcq .mcq-partially-correct .mcq-feedback:before {
            content: "You haven't selected all the correct answers.";
        }
    </style>
</div><!--#wrapper-->
</body>
</html>
