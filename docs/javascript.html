
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>
    Experiments in economics: Laboratory projects: Javascript
    </title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="Javascript" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://www.core-econ.org/docs/javascript.html" />
    <meta property="og:image" content="http://www.core-econ.org/_docs/images/web/" />
        <link rel="stylesheet" type="text/css" media="all" href="/book/styles/web.css" />
<script id="MathJax"
   src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script id="MathJaxConfig" type="text/x-mathjax-config" >
MathJax.Hub.Config({
    messageStyle: "none",
    "HTML-CSS": {
        availableFonts: [], // force use of webFont
        webFont: "Gyre-Pagella",
        scale: 90,
        styles: {
            ".MathJax [style*=border-top-width]": {
                "border-top-width": "0.5pt ! important"
            }
        }
    }
});
</script>
<script>
WebFontConfig = {
     google: {
         families: ['Amiri:400,400i,700', 'Source Sans Pro:400,700,700:latin-ext']
     }
};
(function(d) {
    var wf = d.createElement('script'), s = d.scripts[0];
    wf.src = 'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js';
    wf.async = true;
    s.parentNode.insertBefore(wf, s);
})(document)
</script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-71347024-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-106812057-1');
</script>
</head>
<body class="_docs chapter">
<div class="notification warning-testing-site">
    You're looking at a testing site for Experiments in economics: Laboratory projects, not the real, live site.
</div>
<div id="wrapper">
<div class="masthead">
    <ul>
        <li class="masthead-series-name"><a href="../index.html">Experiments in economics: Laboratory projects</a></li>
    </ul>
</div><!--.masthead-->
<div class="nav-buttons">
	<a class="nav-back-button">←</a>
	<a class="nav-button" href="#nav">Contents</a>
</div>
    <div class="chapter-opener-image chapter-opener-image-none">
    </div>
	<div id="content">
<h1 id="javascript">Javascript</h1>
<p>Unless there’s a good reason to put them elsewhere, scripts should live in <code class="language-r highlighter-rouge"><span class="n">assets</span><span class="o">/</span><span class="n">js</span></code>.</p>
<p>To add them to your <code class="language-r highlighter-rouge"><span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span></code> elements, add <code class="language-r highlighter-rouge"><span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span></code> tags to <code class="language-r highlighter-rouge"><span class="err">_</span><span class="n">includes</span><span class="o">/</span><span class="n">head</span><span class="o">-</span><span class="n">elements</span></code>.</p>
<p>To add them just before the <code class="language-r highlighter-rouge"><span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span></code> tag, add <code class="language-r highlighter-rouge"><span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span></code> tags to <code class="language-r highlighter-rouge"><span class="err">_</span><span class="n">includes</span><span class="o">/</span><span class="n">end</span><span class="o">-</span><span class="n">elements</span></code>.</p>
<p>You can also link to remote scripts here, without the need to place the actual scripts in the <code class="language-r highlighter-rouge"><span class="n">js</span></code> folder.</p>
<p>Keep in mind that anything you add to <code class="language-r highlighter-rouge"><span class="n">head</span><span class="o">-</span><span class="n">elements</span></code> will be added to all books in the series folder, and to all their formats.</p>
<h2 id="limiting-scripts-by-book-or-format">Limiting scripts by book or format</h2>
<p>To limit a script to a given book or format, wrap the script tag in <a href="https://help.shopify.com/themes/liquid/tags/control-flow-tags">Liquid control flow tags</a>. For instance:</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="o">% include metadata %</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="o">% if book-directory == "grapes-of-wrath" %</span><span class="p">}</span><span class="w">
</span><span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s2">"{{ site.baseurl }}/assets/js/grapes-of-wrath.js"</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span><span class="w">
</span><span class="p">{</span><span class="o">% endif %</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>(The <code class="language-r highlighter-rouge"><span class="n">include</span><span class="w"> </span><span class="n">metadata</span></code> tag fetches all kinds of information about the page, including which <code class="language-r highlighter-rouge"><span class="n">book</span><span class="o">-</span><span class="n">directory</span></code> it’s in.)</p>
<p>To limit a script to a given output format, use <code class="language-r highlighter-rouge"><span class="n">site.output</span></code>:</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="o">% if site.output == "print-pdf" %</span><span class="p">}</span><span class="w">
</span><span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s2">"{{ site.baseurl }}/assets/js/print-headers.js"</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span><span class="w">
</span><span class="p">{</span><span class="o">% endif %</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<h2 id="adding-scripts-to-epubs">Adding scripts to epubs</h2>
<p>Scripts in epub are special. While web and PDF scripts should be in <code class="language-r highlighter-rouge"><span class="o">/</span><span class="n">assets</span><span class="o">/</span><span class="n">js</span></code>, all scripts to be used in your epub should be in <code class="language-r highlighter-rouge"><span class="err">_</span><span class="n">epub</span><span class="o">/</span><span class="n">js</span></code>. This is because you must not have any scripts in your epub that you aren’t using, or it won’t validate. By keeping epub scripts separate, this is easier to manage.</p>
<p>Also, epub scripts must have a YAML frontmatter block, even if it’s empty:</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">---</span><span class="w">
</span><span class="o">---</span><span class="w">
</span></code></pre></div></div>
<p>This block tells Jekyll to process the script, which means it knows about it, which our epub package needs to be able to include in the manifest.</p>
<p>Finally, if you’re adding scripts to your pages, set <code class="language-r highlighter-rouge"><span class="n">epub</span><span class="o">-</span><span class="n">scripts</span><span class="o">:</span><span class="w"> </span><span class="n">true</span></code> in <code class="language-r highlighter-rouge"><span class="err">_</span><span class="n">data</span><span class="o">/</span><span class="n">settings.yml</span></code>. This flags your pages as <code class="language-r highlighter-rouge"><span class="n">scripted</span></code> in the epub manifest, which is required for validation.</p>
<h3 id="linking-to-scripts-for-epub">Linking to scripts for epub</h3>
<p>In the finished epub, these scripts will end up in a <code class="language-r highlighter-rouge"><span class="n">js</span></code> folder alongside <code class="language-r highlighter-rouge"><span class="n">text</span></code>, <code class="language-r highlighter-rouge"><span class="n">styles</span></code>, <code class="language-r highlighter-rouge"><span class="n">images</span></code> and <code class="language-r highlighter-rouge"><span class="n">fonts</span></code>. So all links to scripts that you want to include in epub output should be in <code class="language-r highlighter-rouge"><span class="n">site.output</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"epub"</span></code> tags and relative to <code class="language-r highlighter-rouge"><span class="n">text</span></code>:</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="o">% if site.output == "epub" %</span><span class="p">}</span><span class="w">
</span><span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s2">"../js/foo.js"</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span><span class="w">
</span><span class="p">{</span><span class="o">% endif %</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
	</div><!--#content-->
    <div id="nav" class="non-printing">
            <h2>Documentation</h2>
            <div class="nav-list">
                    <ol class="nav-series-home">
                        <li><a href="../index.html">Home</a></li>
                    </ol>
                    <ul>
                        <li><a href="../docs">Docs</a>
<ul>
    <li class="has-children"><a>Editing</a>
      <ul>
          <li>
            <a href="/docs/bibliography.html">Bibliography</a>
          </li>
          <li>
            <a href="/docs/boxes-and-box-like-features.html">Boxes</a>
          </li>
          <li>
            <a href="/docs/classes.html">Supported classes</a>
          </li>
          <li>
            <a href="/docs/definitions.html">Definitions</a>
          </li>
          <li>
            <a href="/docs/dialogue.html">Dialogue</a>
          </li>
          <li>
            <a href="/docs/figures.html">Figures</a>
          </li>
          <li>
            <a href="/docs/glossary.html">Glossary</a>
          </li>
          <li>
            <a href="/docs/house-style.html">House style</a>
          </li>
          <li>
            <a href="/docs/images.html">Images</a>
          </li>
          <li>
            <a href="/docs/include-theme-legend.html">Theme legends</a>
          </li>
          <li>
            <a href="/docs/markdown.html">Markdown</a>
          </li>
          <li>
            <a href="/docs/mathematics.html">Mathematics</a>
          </li>
          <li>
            <a href="/docs/multiple-choice-questions.html">Questions</a>
          </li>
          <li>
            <a href="/docs/notes.html">Footnotes, endnotes and sidenotes</a>
          </li>
          <li>
            <a href="/docs/showing-links-and-cross-references-in-print.html">Links and cross-refs</a>
          </li>
          <li>
            <a href="/docs/slides.html">Slidelines</a>
          </li>
          <li>
            <a href="/docs/superscripts-and-subscripts.html">Superscripts and subscripts</a>
          </li>
          <li>
            <a href="/docs/tables.html">Tables</a>
          </li>
          <li>
            <a href="/docs/theme-key.html">Theme keys</a>
          </li>
          <li>
            <a href="/docs/tocs.html">Tables of contents</a>
          </li>
          <li>
            <a href="/docs/translations.html">Translations</a>
          </li>
          <li>
            <a href="/docs/videos.html">Videos</a>
          </li>
          <li>
            <a href="/docs/web-navigation.html">Navigation</a>
          </li>
      </ul>
    </li>
    <li class="has-children"><a>Technical</a>
      <ul>
          <li>
            <a href="/docs/converting-manuscript-to-markdown.html">Converting manuscript to markdown</a>
          </li>
          <li>
            <a href="/docs/external-media.html">External media</a>
          </li>
          <li>
            <a href="/docs/javascript.html">Javascript</a>
          </li>
          <li>
            <a href="/docs/requirements.html">Technical requirements</a>
          </li>
          <li>
            <a href="/docs/setting-up-your-computer.html">Setting up your computer</a>
          </li>
          <li>
            <a href="/docs/setting-up.html">Setting up</a>
          </li>
      </ul>
    </li>
    <li class="has-children"><a>Layout</a>
      <ul>
          <li>
            <a href="/docs/page-numbers.html">Page numbers</a>
          </li>
          <li>
            <a href="/docs/print-layout.html">Print layout</a>
          </li>
          <li>
            <a href="/docs/running-heads-in-print.html">Running heads</a>
          </li>
      </ul>
    </li>
    <li class="has-children"><a>Output</a>
      <ul>
          <li>
            <a href="/docs/print-output.html">Print output</a>
          </li>
      </ul>
    </li>
</ul>
                        </li>
                    </ul>
  <ol class="">
  </ol>
            </div><!--.nav-list-->
            <div class="widgets">
            </div><!--.widgets-->
    </div><!--#nav-->
    <div id="footer" dir="ltr">
        <div class="footer-content">
            <div class="footer-logos">
                <a href="http://core-econ.org">
                    <img src="../assets/coreecon_logo_bw.png">
                </a>
            </div>
            <div class="footer-text">
            </div>
            <div class="footer-licence">
                <a title="Licensed under Creative Commons BY NC ND" alt="Licensed under Creative Commons BY NC ND" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img src="../assets/cc-byncnd.png"></a>
                <br />
            </div>
        </div><!--.footer-content-->
    </div><!--#footer-->
    <script src="../assets/js/bundle.js"></script>
    <style>
        .js-mcq .mcq-correct .mcq-feedback:before {
            content: "Correct!";
        }
        .js-mcq .mcq-incorrect .mcq-feedback:before {
            content: "Incorrect";
        }
        .js-mcq .mcq-partially-correct .mcq-feedback:before {
            content: "You haven't selected all the correct answers.";
        }
    </style>
</div><!--#wrapper-->
</body>
</html>
